{% extends 'base.html' %}

{% block content %}
<div class="flex-1 flex items-center justify-center px-6 py-12">
    <div class="w-full max-w-md">
        <a href="/" class="inline-flex items-center text-sm text-slate-400 hover:text-primary dark:hover:text-accent mb-8 transition-colors">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
            메인으로 돌아가기
        </a>

        <div class="mb-10">
            <h2 class="text-3xl font-bold font-serif text-slate-900 dark:text-white mb-2">다시 오셨군요!</h2>
            <p class="text-slate-500 dark:text-slate-400">아이디와 비밀번호를 입력해주세요.</p>
        </div>

        {% with messages = get_flashed_messages() %}
          {% if messages %}
            {% for message in messages %}
              <div class="mb-4 p-4 bg-blue-50 border-l-4 border-blue-500 text-blue-700 text-sm rounded-r-xl">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <form action="/login" method="POST" class="space-y-5" onsubmit="return handleSubmit()">
            <div>
                <label for="email" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 ml-1">이메일</label>
                <input type="email" id="email" name="email" required autocomplete="username"
                    class="w-full px-4 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-primary dark:focus:ring-accent focus:border-transparent outline-none transition-all dark:text-white"
                    placeholder="example@mail.com">
            </div>

            <div>
                <div class="flex justify-between items-center mb-1.5 ml-1">
                    <label for="password" class="block text-sm font-medium text-slate-700 dark:text-slate-300">비밀번호</label>
                    <a href="#" class="text-xs text-slate-400 hover:text-primary">비밀번호를 잊으셨나요?</a>
                </div>
                <input type="password" id="password" name="password" required autocomplete="current-password"
                    class="w-full px-4 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-primary dark:focus:ring-accent focus:border-transparent outline-none transition-all dark:text-white"
                    placeholder="비밀번호를 입력해주세요">
            </div>

            <button type="submit" id="login-btn"
                class="w-full py-4 bg-primary dark:bg-accent hover:opacity-90 text-white dark:text-slate-900 font-bold rounded-xl shadow-lg shadow-primary/20 dark:shadow-accent/20 transition-all transform active:scale-[0.98] mt-4">
                로그인하기
            </button>
        </form>

        <p class="mt-8 text-center text-sm text-slate-500 dark:text-slate-400">
            아직 회원이 아니신가요? 
            <a href="/signup" class="text-primary dark:text-accent font-bold hover:underline ml-1">회원가입하기</a>
        </p>
    </div>
</div>

<script>
function handleSubmit() {
    const btn = document.getElementById('login-btn');
    btn.disabled = true;
    btn.innerText = "로그인 중...";
    return true;
}
</script>
{% endblock %}